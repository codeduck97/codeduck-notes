# MySQL支持的存储引擎

- **InnoDB**：具备**外键支持功能的事务处理引擎**
- **MyISAM**：主要的**非事务处理存储引擎**
- **MEMORY**：置于**内存**的表

- ARCHIVE：用于数据存档的引擎（行被插入后就不能再修改了）
- BLACKHOLE：这种存储引擎会丢弃写操作，读操作会返回空内容
- CSV：这种存储引擎在存储数据时，会以逗号作为数据项之间的分隔符
- FEDERATED：用来访问远程表的存储引擎
- MERGE：用来管理由多个 MyISAM表构成的表集合
- NDB：MySQL集群专用存储引擎

**查看mysql支持的存储引擎：**

![image-20210302210543331](images/image-20210302210543331.png)

# 表的磁盘存储方式

每次创建表时，MySQL都会创一个`xxx(表名).frm`的磁盘文件，用来保存该表的格式（表的定义），无论是那种存储引擎都会统一创建该磁盘文件，用来管理表的信息。除了.frm文件外，各个存储引擎还会创建其他文件来保存表数据，如：

- **InnoDB**：.ibd（保存数据和索引）
- **MyISAM**：.MYD（数据）、.MYI（索引）
- **CSV**：.CSV（数据）、.CSM（元数据）

**MEMORY**存储引擎会把表的数据和索引存储在内存中！

# InnoDB存储引擎

InnoDB是MySQL默认的存储引擎，其主要功能如下：

- 表在执行提交和回滚操作时是**事务安全**的。可以通过创建保存点（savepoint）来实现部分回滚
  在系统崩溃后可以自动恢复；
- **外键和引用完整性**支持，包括级联删除和更新；（外键会增加表之间的耦合性，开发过程中不推荐使用）
- 基于**行级别的锁定**和多版本化，使得在执行同时包含有检索和更新操作的组合条件查询时，可以表现出很好的并发性能。
- 从 MySQL56开始，InnoDB支持**全文搜索**和**FULLTEXT索引**。

InnoDB存储引擎详解

本文参考《MySQL技术内幕》第五版

# MyISAM存储引擎

MyISAM存储引擎的主要功能如下：

- 当保存连续相似的字符串索引值时，它会对键进行压缩。对于数字索引值会对高位字节的索引值进行压缩保存，低位字节表示为索引（检索速度快）；
- 与其他存储引擎相比，它为AUTO_INCREATMENT列提供了更多的功能；
- 每个 MyISAM表都有一个标志，它会在执行表检查操作时被设置。MyISAM表还有个标志，用于表明该表在上次使用后是否被正常关闭。如果服务器意外宕机或机器崩溃，那么可用这个标志来判断表是否需要检查和修复；
- 支持全文检索和 FULLTEXT素引。支持空间数据类型和 SPATIAL索引；

# MEMORY存储引擎

MEMORY存储引擎会把表储存在内存里，并且这些表的行长度固定不变。这两个特性使得它的相关操作非常快。

- 默认情况下，MEMORY表使用的是散列索引——这种索引对于“相等比较”非常快，但是对于范围比较（<、>、等）不适合（散列的特性使然）同样也不适合`ORDER BY`；
- 存储在MEMORY表里的行使用长度固定不变的格式。因此不能使用长度可变的数据类型BLOB和TEXT。`PS`：VARCHAR是一种长度可变的类型，但由于在MySQL内部，它被当作是一种长度固定不变的CHAR类型；

PS：MySql 最常用存储引擎 InnoDB 和 MyISAM 都不支持 Hash 索引，它们默认的索引都是 B-Tree。但是如果你在创建索引的时候定义其类型为 Hash，MySql 并不会报错，而且你通过 SHOW CREATE TABLE 查看该索引也是 Hash，只不过该索引实际上还是 B-Tree。